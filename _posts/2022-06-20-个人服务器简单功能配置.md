---
title: ä¸ªäººæœåŠ¡å™¨ç®€å•åŠŸèƒ½é…ç½®
tag: [Linux, ç§‘å­¦å†²æµª]
key: 2022-06-20-ä¸ªäººæœåŠ¡å™¨ç®€å•åŠŸèƒ½é…ç½®
---

# v2rayn

referï¼š

> æœ€æ–°çš„ v2ray éƒ½æ˜¯ v2fly åœ¨æ›´æ–°

- [v2fly/fhs-install-v2ray: Bash script for installing V2Ray (github.com)](https%3A%2F%2Fgithub.com%2Fv2fly%2Ffhs-install-v2ray)
- [V2Ray é…ç½®æŒ‡å— | æ–° V2Ray ç™½è¯æ–‡æŒ‡å— (v2fly.org)](https://guide.v2fly.org/) å†™çš„å¾ˆå¥½
- [V2Ray å®Œå…¨ä½¿ç”¨æ•™ç¨‹ â€“ yearliny](https://yearliny.com/v2ray-complete-tutorial/)
- [V2Ray é«˜çº§æŠ€å·§ï¼šæµé‡ä¼ªè£… - tlanyan (itlanyan.com)](https://itlanyan.com/v2ray-traffic-mask/) æœ‰å¾…å­¦ä¹ 

## Steps

```Bash
#1.ä¸‹è½½å®‰è£…shellè„šæœ¬

bash <(curl -L https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-release.sh) 

#2.è®¾ç½®å¼€æœºå¯åŠ¨

systemctl enable v2ray

#3.å¼€å¯v2rayæœåŠ¡

systemctl start v2ray

#æŸ¥çœ‹v2rayçŠ¶æ€

service v2ray status

#4.æ–°å»ºserverç«¯é…ç½®æ–‡ä»¶

vim /usr/local/etc/v2ray/config.json

#5.æ·»åŠ vmessé…ç½®ä¿¡æ¯ï¼ˆåœ¨ä¸‹ä¸€å°èŠ‚ï¼‰

#6.é‡å¯v2ray

systemctl stop v2ray

systemctl start v2ray

```

### æ·»åŠ  vmess é…ç½®ä¿¡æ¯

```JSON
{

  "inbounds": [

    {

      "port": xxx, // æœåŠ¡å™¨ç›‘å¬ç«¯å£ï¼Œ**è®°å¾—åœ¨æœåŠ¡å™¨å•†æ§åˆ¶å°å¼€æ”¾è¯¥ç«¯å£**

      "protocol": "vmess",    // ä¸»ä¼ å…¥åè®®

      "settings": {

        "clients": [

          {

            "id": "xxxxxxx",  // ç”¨æˆ· IDï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å¿…é¡»ç›¸åŒï¼Œç›¸å½“äºserverå’Œclientäº¤æµçš„å‡­è¯ï¼Œè¦æ¢ä¸€ä¸ªè‡ªå·±çš„

            "alterId": 0

          }

        ]

      }

    }

  ],

  "outbounds": [

    {

      "protocol": "freedom",  // ä¸»ä¼ å‡ºåè®®

      "settings": {}

    }

  ]

}

```

id ç”Ÿæˆï¼š

- [Online UUID Generator Tool](https://www.uuidgenerator.net/)
- æˆ–è€…åœ¨ linux æœåŠ¡å™¨å‘½ä»¤ç”Ÿæˆï¼š`cat /proc/sys/kernel/random/uuid`

### é…ç½® client ç«¯

#### ä¸‹è½½

- windows ç«¯ä¸‹è½½ï¼š[2dust/v2rayN: A V2Ray client for Windows (github.com)](https%3A%2F%2Fgithub.com%2F2dust%2Fv2rayN)
- Android ç«¯ï¼š[2dust/v2rayNG: A V2Ray client for Android(github.com)](https%3A%2F%2Fgithub.com%2F2dust%2Fv2rayNG)
- ios ç«¯éœ€è¦å» appstore ç¾åŒºä¹° **shadowrocket**ï¼Œæ²¡æœ‰ paypal/visa çš„å»æ·˜å®ä¹°ä¸ªç¾åŒºç¤¼å“å¡

æŒ‰ç…§ä¸Šé¢ server ç«¯çš„é…ç½®ä¿¡æ¯å¡«å…¥å³å¯ï¼Œé¢å¤–å¡«å…¥æœåŠ¡å™¨çš„å¤–ç½‘ ip

# åœ¨çº¿æ–‡ä»¶æµè§ˆ + åˆ†äº«ï¼šFileBrowser å®‰è£…æ’­æ”¾è§†é¢‘

## å…³äºå­—å¹•

é—æ†¾çš„æ˜¯ filebrowser å¯¹å­—å¹•æ”¯æŒä¸å¤Ÿå®Œå–„ï¼ŒæœŸå¾…å¤§ä½¬èƒ½è§£å†³ï¼š

> åŸå› æ˜¯ html5 åªæ”¯æŒ vtt æ ¼å¼å­—å¹•ï¼Œéœ€è¦åœ¨[è¿™ä¸ªç½‘ç«™](https%3A%2F%2Fwww.happyscribe.com%2Fsubtitle-tools%2Fsubtitle-converter)æŠŠ srt è½¬æ¢ä¸º vttï¼Œæˆ–[å­—å¹•æ ¼å¼è½¬æ¢ (taozhc.com)](https://sf.taozhc.com/site/transfersub)ï¼Œ[Convert Subtitles to Vtt: easy online format converter | Subtitle Tools](https://subtitletools.com/convert-to-vtt-online) è¿™ä¸ªç½‘ç«™æ”¯æŒæ›´å¤šå­—å¹•æ ¼å¼

- [feat: handle subtitles for video streaming by VLEFF Â· Pull Request #468 Â· filebrowser/filebrowser (github.com)](https://github.com/filebrowser/filebrowser/pull/468)
- [Media Player Subtitles Support Â· Discussion #1641 Â· filebrowser/filebrowser (github.com)](https://github.com/filebrowser/filebrowser/discussions/1641)
- [Issues Â· filebrowser/filebrowser (github.com)](https://github.com/filebrowser/filebrowser/issues?q=is%3Aissue+subtitle)

### mkv æ–‡ä»¶å¸¦å­—å¹•æ’­æ”¾

mkv æ–‡ä»¶æ¯”è¾ƒç‰¹æ®Šæ˜¯å°è£…å­—å¹•

> å†…åµŒå­—å¹•æ˜¯ç¡¬å­—å¹•ï¼Œç›´æ¥è¾“å‡ºåœ¨è§†é¢‘ä¸Šçš„ï¼›å°è£…å­—å¹•æ˜¯åœ¨ä¸åŒäºè§†é¢‘è½¨é“çš„å­—å¹•è½¨é“ä¸Šï¼›å¤–æŒ‚å­—å¹•å°±æ˜¯è§†é¢‘æ–‡ä»¶å¤–çš„å­—å¹•æ–‡ä»¶

- **Windows** edgeï¼ˆç‰ˆæœ¬ 101.0.1210.39ï¼‰ï¼šæ— æ³•ç›´æ¥æ’­æ”¾ mkv çš„å­—å¹•ï¼Œéœ€è¦å‚è€ƒä»¥ä¸‹æ­¥éª¤æŠŠå°è£…å­—å¹•æå–å‡ºæ¥ï¼Œå¹¶è½¬åŒ–ä¸º vtt å­—å¹•æ ¼å¼æ–‡ä»¶
- ä¸‹è½½ä¸‹é¢çš„ shell è„šæœ¬ï¼Œæ”¾åœ¨ç”µå½±çš„æ–‡ä»¶å¤¹é‡Œï¼Œæ›´æ”¹è„šæœ¬æƒé™ `chmod 777 subsextract.sh`

[Watson-XP/SubsExtract: Bash script to extract subtitle tracks from MKV files (github.com)](https://github.com/Watson-XP/SubsExtract)

1. å®‰è£… `apt install mkvtoolnix`
2. è¿è¡Œ `./subsextract.sh PathtotheMovie`ï¼Œå¾—åˆ°çš„æ˜¯ ass æ–‡ä»¶ï¼Œè¿˜éœ€è½¬æ¢ä¸º vtt æ ¼å¼

- **Android **via æµè§ˆå™¨å­—å¹•æ­£å¸¸ï¼Œedge æµè§ˆå™¨ä¸è¡Œ
- **IOS **åªæœ‰ alook æµè§ˆå™¨å¯ä»¥æ’­æ”¾ mkvï¼Œä½†æ˜¯æ— æ³•æ˜¾ç¤ºå­—å¹•ï¼Œå¯ä»¥ä¸‹è½½é…å¥—çš„ aplayerï¼Œåœ¨ alook åˆ†äº«åˆ° aplayer å¯ä»¥æ’­æ”¾ï¼Œä½†æ˜¯æœ‰å¤šä¸ªå­—å¹•æ—¶åªæ˜¾ç¤ºç¬¬ä¸€ä¸ªå­—å¹•ï¼ˆæ¯”å¦‚é˜¿æ‹‰ä¼¯è¯­ï¼‰ğŸ¤®
- æœ€ç»ˆçš„è§£å†³åŠæ³•ç›¸å¯¹éº»çƒ¦äº›ï¼š

1. åœ¨ filebrowser ä¸­é€‰ä¸­è¦çœ‹çš„ mkv å¹¶åˆ†äº«ï¼Œæ‰“å¼€åˆ†äº«é“¾æ¥ï¼Œç‚¹å‡»æ‰“å¼€ï¼Œå†å¤åˆ¶æ’­æ”¾é“¾æ¥
2. ä¸‹è½½ nPlayerï¼Œé€‰æ‹© url æ’­æ”¾ï¼Œå°±ä¼šé»˜è®¤æ’­æ”¾ä¸­æ–‡

referï¼š

[Installation - File Browser](https://filebrowser.org/installation)

[ç”¨ Potplayer æ’­æ”¾ç½‘é¡µè§†é¢‘ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/397343251)

[File Browser å®‰è£…åŠä½¿ç”¨_mimishy2000 çš„åšå®¢-CSDN åšå®¢_filebrowser](https://blog.csdn.net/mimishy2000/article/details/103437184)

## FileBrowser  Installation Steps

- ä¸‹è½½å®‰è£… filebrowserï¼š`curl -fsSL ``https://raw.githubusercontent.com/filebrowser/get/master/get.sh`` | bash`
- åˆ›å»ºé…ç½®æ•°æ®åº“ï¼ˆéœ€è¦ root æƒé™åˆ›å»ºæ–‡ä»¶ï¼‰ï¼š`filebrowser -d /etc/filebrowser.db config init`
- è®¾ç½®ç›‘å¬åœ°å€ï¼š`filebrowser -d /etc/filebrowser.db config set --address 0.0.0.0`
- è®¾ç½®ç›‘å¬ç«¯å£ï¼ˆè®°å¾—å¼€æ”¾æœåŠ¡å™¨å•†çš„ç«¯å£ï¼‰ï¼š`filebrowser -d /etc/filebrowser.db config set --port 8088`
- è®¾ç½®è¯­è¨€ç¯å¢ƒï¼š`filebrowser -d /etc/filebrowser.db config set --locale zh-cn`
- è®¾ç½®æ—¥å¿—ä½ç½®ï¼š`filebrowser -d /etc/filebrowser.db config set --log /var/log/filebrowser.log`
- æ·»åŠ ä¸€ä¸ªç”¨æˆ·ï¼š`filebrowser -d /etc/filebrowser.db users add root password --perm.admin`ï¼Œå…¶ä¸­çš„ `root` å’Œ `password` åˆ†åˆ«æ˜¯ç”¨æˆ·åå’Œå¯†ç ï¼Œæ ¹æ®è‡ªå·±çš„éœ€æ±‚æ›´æ”¹ã€‚
- ï¼ˆå¯é€‰ï¼‰è®¾ç½®å±•ç¤ºçš„æ ¹ç›®å½•ä½ç½®ï¼š`filebrowser -d /etc/filebrowser.db config set -r /home/username/`
- å¼€å¯åå°è¿è¡Œï¼š
- å…ˆåˆ›å»ºä¸ª service æ–‡ä»¶ï¼š`vi /lib/systemd/system/filebrowser.service`
- åœ¨é‡Œé¢æ’å…¥ä¸€ä¸‹å†…å®¹ï¼š

```Plain Text
[Unit]

Description=File Browser

After=network.target

[Service]

User=root

ExecStart=/usr/local/bin/filebrowser -d /etc/filebrowser.db

[Install]

WantedBy=multi-user.target

```

- è¿è¡Œï¼š`systemctl start filebrowser.service`
- åœæ­¢è¿è¡Œï¼š`systemctl stop filebrowser.service`
- å¼€æœºå¯åŠ¨ï¼š`systemctl enable filebrowser.service`
- å–æ¶ˆå¼€æœºå¯åŠ¨ï¼š`systemctl disable filebrowser.service`
- æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ï¼š`systemctl status filebrowser.service`

æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨æµè§ˆå™¨è¾“å…¥ `ip:port` è®¿é—®äº†ï¼

Note:

- æŸ¥è¯¢å¹¶ä¿®æ”¹ db æ–‡ä»¶éœ€è¦åœæ­¢ filebrowser æœåŠ¡
- å¯ä»¥æ·»åŠ  admin çš„è´¦æˆ·è¿›è¡Œç®¡ç†ï¼Œä½†æ˜¯æƒé™è¿‡å¤§ï¼Œæœ€å¥½è¿˜æ˜¯åˆ äº†
- admin çš„å…¨å±€è®¾ç½®ä¸­æœ‰ `åœ¨shellä¸­æ‰§è¡Œ` å¯ä»¥æ·»åŠ ä¸€ä¸ª shell è„šæœ¬è·¯å¾„ï¼ˆå¿…é¡»å¸¦å‚æ•°ï¼‰
